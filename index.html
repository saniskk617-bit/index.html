<!DOCTYPE html>
<html lang="ha">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sani SK - Taskar Ilimi</title>
    
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

    <style>
        :root {
            --primary-color: #0c6155;
            --bg-color: #efeae2;
            --white: #ffffff;
            --chat-sent: #d9fdd3;
            --chat-received: #ffffff;
            --btn-green: #25d366;
            --text-color: #333333;
            --meta-color: #667781;
        }

        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
            margin: 0; background-color: var(--bg-color); 
            height: 100vh; display: flex; flex-direction: column; overflow: hidden;
        }

        /* --- LOGIN SCREEN --- */
        .auth-container { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center; 
            background-color: var(--primary-color); z-index: 1000; flex-direction: column;
        }
        .auth-card { 
            width: 85%; max-width: 350px; background: white; 
            padding: 30px; border-radius: 15px; text-align: center; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .btn-google {
            width: 100%; padding: 12px; margin-top: 20px;
            background: #ffffff; color: #444; border: 1px solid #ddd;
            border-radius: 8px; font-weight: bold; cursor: pointer;
            display: flex; align-items: center; justify-content: center; gap: 10px;
        }

        /* --- MAIN APP UI --- */
        .header { background: var(--primary-color); color: white; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .nav-tabs { background: var(--primary-color); display: flex; z-index: 10; }
        .tab { flex: 1; text-align: center; padding: 15px 0; color: rgba(255,255,255,0.7); cursor: pointer; border-bottom: 3px solid transparent; font-weight: bold; text-transform: uppercase; font-size: 13px; }
        .active-tab { color: white; border-bottom: 3px solid white; }

        .content-area { flex: 1; overflow-y: auto; padding: 10px; }

        /* --- POST CARDS --- */
        .post-card { background: white; border-radius: 10px; padding: 16px; margin-bottom: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border-left: 5px solid var(--primary-color); }
        .post-title { color: #111; font-size: 17px; margin-bottom: 6px; font-weight: 700; }
        .post-body { font-size: 14px; line-height: 1.5; color: #444; }
        .post-day { font-size: 11px; background: #e0f2f1; color: var(--primary-color); padding: 3px 8px; border-radius: 10px; font-weight: bold; margin-bottom: 5px; display: inline-block; }

        /* --- CHAT SYSTEM --- */
        .chat-view { display: flex; flex-direction: column; height: 100%; }
        .messages-container { flex: 1; overflow-y: auto; display: flex; flex-direction: column; padding: 10px; }
        .message { max-width: 80%; padding: 8px 12px; margin: 5px; border-radius: 8px; font-size: 14px; position: relative; box-shadow: 0 1px 1px rgba(0,0,0,0.1); }
        .msg-sent { background: var(--chat-sent); align-self: flex-end; border-top-right-radius: 0; }
        .msg-received { background: var(--chat-received); align-self: flex-start; border-top-left-radius: 0; }
        .msg-user { font-weight: bold; font-size: 10px; display: block; color: var(--primary-color); margin-bottom: 2px; }
        
        .chat-input-wrapper { padding: 10px; display: flex; align-items: center; background: #fff; border-top: 1px solid #ddd; }
        .input-box { flex: 1; padding: 12px 18px; border-radius: 25px; border: 1px solid #ccc; outline: none; font-size: 15px; }
        .send-btn { background: var(--btn-green); color: white; width: 45px; height: 45px; border-radius: 50%; border: none; margin-left: 8px; cursor: pointer; font-size: 18px; display: flex; align-items: center; justify-content: center; }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="authScreen" class="auth-container">
        <div class="auth-card">
            <h2 style="color: var(--primary-color); margin-bottom: 5px;">Sani SK</h2>
            <p style="color: #666; font-size: 14px;">Maraba da Taskar Ilimi. Shiga don karatu da tattaunawa.</p>
            <button class="btn-google" onclick="loginWithGoogle()">
                <img src="https://cdn-icons-png.flaticon.com/512/2991/2991148.png" width="20">
                Shiga da Google Account
            </button>
        </div>
    </div>

    <div id="appScreen" class="hidden" style="height: 100%; flex-direction: column;">
        <div class="header">
            <span id="welcomeText" style="font-weight: bold;">Sani SK</span>
            <button onclick="logout()" style="background:rgba(255,255,255,0.2); border:none; color:white; border-radius:15px; padding:5px 12px; font-size: 12px;">Fita</button>
        </div>

        <div class="nav-tabs">
            <div id="tab1" class="tab active-tab" onclick="switchTab('darussa')">DARUSSA (30)</div>
            <div id="tab2" class="tab" onclick="switchTab('tattaunawa')">TATTAUNAWA</div>
        </div>

        <div class="content-area" id="view-darussa">
            <div id="posts-container"></div>
        </div>

        <div id="view-tattaunawa" class="hidden chat-view">
            <div class="messages-container" id="chatContainer"></div>
            <div class="chat-input-wrapper">
                <input type="text" id="msgInput" class="input-box" placeholder="Rubuta sako..." onkeypress="if(event.key==='Enter') sendMessage()">
                <button class="send-btn" onclick="sendMessage()">➤</button>
            </div>
        </div>
    </div>

    <script>
        // --- CONFIGURATION ---
        const firebaseConfig = {
            apiKey: "AIzaSyBdKV8-6-ZGqlEd992kBJkSSBrgSJGve8Y",
            authDomain: "sani-sk.firebaseapp.com",
            projectId: "sani-sk",
            storageBucket: "sani-sk.firebasestorage.app",
            messagingSenderId: "811888329988",
            appId: "1:811888329988:web:fc6a67cf841a542a1dbc51",
            databaseURL: "https://sani-sk-default-rtdb.firebaseio.com/" 
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.database();

        let currentUser = null;

        const postsDB = [
            { d: 1, t: "Wayar Hannu: Taskar Ilimi Ko Tarkon Lalacewa?", b: "Wayar hannu tamkar wuka ce. Idan ka bata a hannun mahaukaci, zai iya cutar da kansa. Idan ka bata a hannun mai hankali, zai yanka nama ya ciyar da iyalinsa." },
            { d: 2, t: "Barawo A Cikin Aljihunka", b: "Waya tana sace mana abin da ya fi kudi tsada—wato LOKACI. Muna bata sa'o'i a social media ba tare da mun sani ba. Magani: Kashe 'Notifications' na abubuwan da ba su da muhimmanci." },
            { d: 3, t: "Haske Mai Guba: Lafiya", b: "Kallon waya kafin barci yana hana kwakwalwa sakin sinadarin 'Melatonin' mai kawo barci. Ajiye waya awa 1 kafin ka kwanta." },
            { d: 4, t: "Katangar Gilashi: Iyalai", b: "Muna kusa da juna a gida, amma muna nesa a tunani saboda waya. Ajiye waya gefe yayin cin abinci ko hira da iyali." },
            { d: 5, t: "Taskar Ilimi da Kudi", b: "Wayarka ofis ce. Zaka iya koyon sana'a (Graphics, Coding, Business) a YouTube kyauta. Dole wayarka ta rika kawo kudi." },
            { d: 6, t: "Tarbiyya a Zamanin Digital", b: "Kada ka baiwa yaro waya ka manta da shi. Yi amfani da 'Parental Controls' don tace abin da yake kallo." },
            { d: 7, t: "Kariya Daga 'Yan Damfara", b: "Babu Bankin da zai kira ka ya nemi lambar sirri (OTP). Kada ka danna Link din da baka sani ba." },
            { d: 8, t: "Gaskiya Ko Karya? (Fake News)", b: "Kada ka zama mai yada labari ba tare da tantancewa ba. Bincika kafin ka tura (Share)." },
            { d: 9, t: "Ladabin Waya a Masallaci", b: "Babban rashin ladabi ne waya ta yi kara a cikin Sallah. Kafin ka shiga masallaci, sa waya a 'Silent'." },
            { d: 10, t: "Ladabi a Cikin Jama'a", b: "Kada ka rika kunna waka ko video da karfi a cikin motar haya. Yi amfani da 'Earpiece'." },
            { d: 11, t: "Zagin Wani (Cyberbullying)", b: "Rubuta zagi a comment yana da sauki, amma zunubinsa yana da nauyi. Kada yatsunka su kai ka wuta." },
            { d: 12, t: "Kiyaye Sirrin Rayuwa", b: "Ba komai na rayuwarka ya kamata ya je social media ba. Boye sirrin iyalinka da abincinka." },
            { d: 13, t: "Hassada da Kwatanta Kai", b: "Kada ka kalli hotunan Instagram na wani ka raina rayuwarka. Ka godewa Allah da abin da kake da shi." },
            { d: 14, t: "Godiya (Gratitude)", b: "Maimakon yin korafi a status kullum, yi amfani da wayarka wajen nuna godiya ga Allah." },
            { d: 15, t: "Azumin Waya (Digital Detox)", b: "Mako guda sau daya, gwada ajiye waya na tsawon wasu awanni don samun natsuwa." },
            { d: 16, t: "Koyon Harshe da Fasaha", b: "Akwai Apps kamar Duolingo na koyon yare. Maida wayarka makaranta." },
            { d: 17, t: "Littafai a Tafin Hannu", b: "Zaka iya sauke dubbannin littafai (PDF) a wayarka. Karanta shafi 5 a kullum." },
            { d: 18, t: "Hada Zumunci Mai Amfani", b: "Yi amfani da LinkedIn ko Twitter don haduwa da mutanen da zasu taimaki sana'arka." },
            { d: 19, t: "Kirkirar Abu (Content Creation)", b: "Kada ka zama mai kallo kawai. Kai ma ka zama mai bayarwa (Creator) na alheri." },
            { d: 20, t: "Mai Da Hankali (Deep Work)", b: "Waya tana kashe 'Focus'. Idan kana muhimmin aiki, ajiye waya a wani dakin." },
            { d: 21, t: "Da'awa a Social Media", b: "Hadisi daya da ka tura zai iya shiryar da wani. Yi amfani da wayarka wajen yada addini." },
            { d: 22, t: "Hisabi (Accountability)", b: "A karshen rana, duba 'Screen Time' dinka. Shin Allah zai yi farin ciki da yadda ka yi amfani da wayar?" },
            { d: 23, t: "Sawun Dijital (Digital Footprint)", b: "Intanet ba ta mantuwa. Abin da ka rubuta yau zai iya dawo maka nan da shekara 10." },
            { d: 24, t: "Gaba da AI (Artificial Intelligence)", b: "Duniya tana canzawa. Yi amfani da wayarka wajen sanin sababbin fasahohi." },
            { d: 25, t: "Ma'aunin Duniya da Lahira", b: "Kada waya ta shagaltar da kai daga Alkur'ani. Ka daidaita lokaci." },
            { d: 26, t: "Girmama Manyan Gari", b: "Kada ka bari keyboard ya sa ka raina manya. Yi magana da ladabi a comment section." },
            { d: 27, t: "Guje Wa Ja-in-ja", b: "Watsapp Group ba wurin fada bane. Barin gardama ko da kana kan gaskiya sunnah ce." },
            { d: 28, t: "Tsaftace Zuciya (Unfollow)", b: "Duk shafin da yake sa ka bakin ciki ko sha'awar banza, yi 'Unfollow'." },
            { d: 29, t: "Muhasaba (Review)", b: "Wanne darasi ne ya fi shiga jikinka? Shin ka canza wata dabi'a tun da muka fara?" },
            { d: 30, t: "Kammalawa: Sabon Shafi", b: "Wayar hannu baiwa ce. Rike wayarka da tsoron Allah, zata zama hujja a gare ka." }
        ];

        // --- AUTH ---
        function loginWithGoogle() {
            const provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider).catch(err => alert("Kuskure: " + err.message));
        }

        function logout() { auth.signOut(); }

        auth.onAuthStateChanged(user => {
            if (user) {
                currentUser = user;
                document.getElementById('authScreen').classList.add('hidden');
                document.getElementById('appScreen').style.display = 'flex';
                document.getElementById('welcomeText').innerText = "Sani SK (" + user.displayName.split(' ')[0] + ")";
                renderPosts();
                loadMessages();
            } else {
                document.getElementById('authScreen').classList.remove('hidden');
                document.getElementById('appScreen').style.display = 'none';
            }
        });

        // --- POSTS ---
        function renderPosts() {
            const container = document.getElementById('posts-container');
            container.innerHTML = "";
            postsDB.forEach(post => {
                container.innerHTML += `
                    <div class="post-card">
                        <span class="post-day">Rana ta ${post.d}</span>
                        <div class="post-title">${post.t}</div>
                        <div class="post-body">${post.b}</div>
                    </div>`;
            });
        }

        // --- CHAT ---
        function sendMessage() {
            const input = document.getElementById('msgInput');
            const text = input.value.trim();
            if (!text || !currentUser) return;

            db.ref("messages").push({
                uid: currentUser.uid,
                name: currentUser.displayName,
                text: text,
                time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
            });
            input.value = "";
        }

        function loadMessages() {
            db.ref("messages").limitToLast(50).on("value", snapshot => {
                const container = document.getElementById('chatContainer');
                container.innerHTML = "";
                snapshot.forEach(child => {
                    const msg = child.val();
                    const isMe = msg.uid === currentUser.uid;
                    container.innerHTML += `
                        <div class="message ${isMe ? 'msg-sent' : 'msg-received'}">
                            <span class="msg-user">${isMe ? 'Ni' : msg.name}</span>
                            ${msg.text}
                            <div style="font-size:9px; color:#999; text-align:right;">${msg.time || ''}</div>
                        </div>`;
                });
                container.scrollTop = container.scrollHeight;
            });
        }

        // --- TABS ---
        function switchTab(tab) {
            if (tab === 'darussa') {
                document.getElementById('view-darussa').classList.remove('hidden');
                document.getElementById('view-tattaunawa').classList.add('hidden');
                document.getElementById('tab1').classList.add('active-tab');
                document.getElementById('tab2').classList.remove('active-tab');
            } else {
                document.getElementById('view-darussa').classList.add('hidden');
                document.getElementById('view-tattaunawa').classList.remove('hidden');
                document.getElementById('tab1').classList.remove('active-tab');
                document.getElementById('tab2').classList.add('active-tab');
            }
        }
    </script>
</body>
  </html>
  
